syntax = "proto3";

package settings;

option go_package = "proto/";

service GuildService {
  rpc GetSettings(GetSettingsByGuildRequest) returns (GetSettingsByGuildResponse);
  rpc CreateSettings(CreateGuildSettingsRequest) returns (CreateGuildSettingsResponse);

  rpc AddRole(Role) returns (Role);
  rpc DeleteRole(Role) returns (Role);
  rpc SetRoleMessageId(RoleMessage) returns (RoleMessage);

  rpc SetWelcomeChannel(SetWelcomeChannelRequest) returns (SetWelcomeChannelResponse);
  rpc AddWelcomeMessage(WelcomeMessageRequest) returns (WelcomeMessageResponse);
  rpc DeleteWelcomeMessage(WelcomeMessageRequest) returns (WelcomeMessageResponse);
}

message CreateGuildSettingsRequest {
  string guild_id = 1;
}
message CreateGuildSettingsResponse {
  string guild_id = 1;
}

message SetWelcomeChannelRequest {
  string guild_id = 1;
  string channel_id = 2;
}

message SetWelcomeChannelResponse {
  string guild_id = 1;
  string channel_id = 2;
}

message WelcomeMessageRequest {
  string guild_id = 1;
  string message = 2;
}

message WelcomeMessageResponse {
  string guild_id = 1;
  string message = 2;
}

message GetSettingsByGuildRequest {
  string guild_id = 1;
}

message GetSettingsByGuildResponse {
  GuildSettings settings = 1;
}

message RoleMessage {
  string guild_id = 1;
  string message_id = 2;          
}

message Role {
  string guild_id = 1;
  string role_id = 2; 
  string emoji = 3;         
}

message RolesSettings {
  string message_id = 1;
  map<string, string> matching = 2;
}

message WelcomeSettings {
  string channel_id = 1;
  repeated string messages = 2;
}

message GuildSettings {
  string id = 1;
  string guild_id = 2;
  RolesSettings roles = 3;
  WelcomeSettings welcome = 4;
}
